<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Babav√°r√≥ buli ‚Äì Tippeld meg a baba nem√©t</title>

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: "Segoe UI", sans-serif;
    background: linear-gradient(135deg, #ffd6e8, #d6e8ff);
    height: 100vh;
}

/* TELJES OLDAL */
.wrapper {
    display: grid;
    grid-template-columns: 1fr 1.3fr 1fr;
    gap: 30px;
    width: 100vw;
    height: 100vh;
    padding: 30px;
}

/* BOXOK */
.box {
    background: white;
    border-radius: 30px;
    padding: 30px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.15);
    overflow-y: auto;
}

/* K√ñZ√âP */
.center {
    text-align: center;
    box-shadow: 0 20px 50px rgba(0,0,0,0.2);
}

input {
    padding: 14px;
    width: 80%;
    border-radius: 12px;
    border: 1px solid #ccc;
    font-size: 16px;
    margin: 20px 0;
}

/* LUFI */
.balloons {
    display: flex;
    justify-content: space-around;
    margin-top: 30px;
}

.balloon {
    width: 130px;
    height: 170px;
    border-radius: 50% 50% 45% 45%;
    cursor: pointer;
    position: relative;
    transition: transform 0.2s;
}

.balloon:hover { transform: scale(1.05); }

.balloon::after {
    content: "";
    position: absolute;
    bottom: -35px;
    left: 50%;
    width: 2px;
    height: 35px;
    background: #999;
}

.pink {
    background: radial-gradient(circle at 30% 30%, #fff, #ff69b4);
}

.blue {
    background: radial-gradient(circle at 30% 30%, #fff, #5dade2);
}

/* POP */
.pop {
    animation: pop 0.4s forwards;
}

@keyframes pop {
    to {
        transform: scale(2);
        opacity: 0;
    }
}

/* LIST√ÅK */
ul { list-style: none; padding: 0; margin-top: 15px; }
li { padding: 10px 0; border-bottom: 1px solid #eee; }

/* KONFETTI */
canvas {
    position: fixed;
    top: 0;
    left: 0;
    pointer-events: none;
}

.loading {
    text-align: center;
    color: #999;
    font-style: italic;
    padding: 20px 0;
}

.mobile-loading {
    width: 100%;
    display: none;
    text-align: center;
    margin-top: 15px;
    font-style: italic;
    color: #888;
}
    /* MOBIL GOMBOK ‚Äì ALAP ST√çLUS (MEDIA QUERY-N K√çV√úL) */
.mobile-buttons {
    display: none;
}

@media (max-width: 900px) {
    .mobile-loading {
        display: block;
    }
}

/* MOBIL */
@media (max-width: 900px) {

    canvas {
        position: absolute;
    }
    .counts {
        margin-top: 8px;  
        margin-bottom: 12px;
    }
    .box {
    overflow: hidden;   /* üî• SEMELYIK BOX nem scroll */
  }


body {
    height: auto;
    min-height: 120vh;
    overflow-y: auto;
    overscroll-behavior-y: auto;
}


  .wrapper {
        display: flex;
        align-items: flex-start;   /* ‚¨Ö fel√ºlre */
        justify-content: center;
        width: 100vw;
        height: 100vh;
        padding: 16px; /* üî• ett≈ël l√°tszik a h√°tt√©r k√∂rben */
    }


.box.center {
    width: 100%;
    max-width: 500px;
    max-height: calc(100vh - 32px);
    border-radius: 30px;
    padding: 24px;
    justify-content: flex-start;
    display: flex;
    overflow: hidden;
    flex-direction: column;
    gap: 6px;   /* üî• ez nagyon fontos */
}

.box.center input {
    align-self: center;
}

    .box:nth-child(1) {
        grid-area: girl;
    }

    .box:nth-child(3) {
        grid-area: boy;
    }

    /* mobilon elrejtj√ºk az oldals√≥ boxokat */
    .wrapper > .box:not(.center) {
        display: none;
    }

    /* mobilos gombok */
    .mobile-buttons {
        display: flex;
        gap: 16px;
        margin-top: 0px;
        margin-bottom: 0px;
        flex-shrink: 0;
    }
}



.mobile-buttons button {
    flex: 1;
    padding: 12px;
    border-radius: 14px;
    border: none;
    font-size: 15px;
    font-weight: 600;
    color: white;
    cursor: pointer;
    white-space: nowrap; 
    text-align: center;
}

.mobile-buttons button:first-child {
    background: #ff69b4;
}

.mobile-buttons button:last-child {
    background: #5dade2;
}

    .counts {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
}



.count {
    font-size: 28px;
    font-weight: 700;
}

.pink-text {
    color: #ff69b4;
}

.blue-text {
    color: #5dade2;
}
  /* POPUP */
.popup {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.popup-content {
    background: white;
    padding: 40px;
    border-radius: 25px;
    text-align: center;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
}

.popup-content h2 {
    margin-top: 0;
    font-size: 26px;
}

.popup-content button {
    margin-top: 25px;
    padding: 14px 30px;
    font-size: 16px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: linear-gradient(135deg, #ff69b4, #5dade2);
    color: white;
}


</style>
</head>

<body>

<canvas id="confetti"></canvas>

<div class="wrapper">

    <!-- L√ÅNY -->
    <div class="box">
        <h2 style="color:#ff69b4">üíó L√°ny tippek</h2>
        <ul id="girlList"></ul>
    </div>

    <!-- K√ñZ√âP -->
   <div class="box center">
  <h1>üéâ Babav√°r√≥ buli üéâ</h1>
  <p>Tippeld meg a baba nem√©t!</p>

  <input type="text" id="name" placeholder="Add meg a neved">

  <div class="balloons">
    <div class="balloon pink" onclick="vote('kisl√°ny', this)"></div>
    <div class="balloon blue" onclick="vote('kisfi√∫', this)"></div>
  </div>

  <!-- ‚úÖ MOBIL GOMBOK -->
 

  <!-- ‚úÖ SZ√ÅML√ÅL√ìK -->
<div class="counts">
  <div class="count pink-text">
    üíó <span id="girlCount">0</span>
  </div>
  <div class="count blue-text">
    üíô <span id="boyCount">0</span>
  </div>

  <p id="mobileLoading" class="mobile-loading">
    ‚è≥ Pillanat‚Ä¶ bet√∂lt≈ëdnek a tippjeitek!
  </p>
</div>

<div class="mobile-buttons">
  <button onclick="openTips('girl')">üíó L√°ny tippek</button>
  <button onclick="openTips('boy')">üíô Fi√∫ tippek</button>
</div>

  </div>

  <p id="message"></p>
</div>

   



    <!-- FI√ö -->
    <div class="box">
        <h2 style="color:#5dade2">üíô Fi√∫ tippek</h2>
        <ul id="boyList"></ul>
    </div>

</div>
  <!-- POPUP -->
<div id="popup" class="popup">
  <div class="popup-content">
    <h2 id="popupTitle"></h2>
    <p id="popupText"></p>
    <button onclick="closePopup()">Tov√°bb</button>
  </div>
</div>
    <div id="tipsPopup" class="popup">
  <div class="popup-content">
    <h2 id="tipsTitle"></h2>
    <ul id="tipsContent"></ul>
    <button onclick="closeTips()">Bez√°r√°s</button>
  </div>
</div>



<script>
/* ===== GOOGLE SCRIPT URL ===== */
const SCRIPT_URL =
"https://script.google.com/macros/s/AKfycbxSWYfmaacSgW637VsPQrRcfMnIJMjLfKnLjw2IJHFc102ASleAJYXe3uOLA5PQCfOB/exec";

/* ===== KONFETTI ===== */
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let confetti = [];

function createConfetti(color) {
    for (let i = 0; i < 120; i++) {
        confetti.push({
            x: Math.random() * canvas.width,
            y: -10,
            size: Math.random() * 6 + 4,
            speed: Math.random() * 4 + 2,
            color
        });
    }
    animateConfetti();
}

function animateConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    confetti.forEach((p, i) => {
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x, p.y, p.size, p.size);
        p.y += p.speed;
        if (p.y > canvas.height) confetti.splice(i, 1);
    });
    if (confetti.length > 0) requestAnimationFrame(animateConfetti);
}

/* ===== LIST√ÅK BET√ñLT√âSE SHEETS-B≈êL ===== */
function renderLists() {
    const girl = document.getElementById("girlList");
    const boy = document.getElementById("boyList");
    const mobileLoading = document.getElementById("mobileLoading");
if (mobileLoading) mobileLoading.style.display = "block";


    // ‚è≥ BET√ñLT√âS JELZ√âS
    girl.innerHTML = `<li class="loading">‚è≥ Pillanat‚Ä¶<br>bet√∂lt≈ëdnek a tippjeitek!</li>`;
    boy.innerHTML = `<li class="loading">‚è≥ Pillanat‚Ä¶<br>bet√∂lt≈ëdnek a tippjeitek!</li>`;

    fetch(SCRIPT_URL)
        .then(r => r.json())
        .then(tips => {
            girl.innerHTML = "";
            boy.innerHTML = "";

            let girlCounter = 0;
            let boyCounter = 0;

            tips
              .filter(t => t.name && t.choice)
              .forEach(t => {
                const li = document.createElement("li");
                li.textContent = t.name;

                if (t.choice === "kisl√°ny") {
                    girl.appendChild(li);
                    girlCounter++;
                } else if (t.choice === "kisfi√∫") {
                    boy.appendChild(li);
                    boyCounter++;
                }
              });

            document.getElementById("girlCount").innerText = girlCounter;
            document.getElementById("boyCount").innerText = boyCounter;

            if (mobileLoading) mobileLoading.style.display = "none";
        })
        .catch(() => {
            girl.innerHTML = `<li class="loading">üòï Nem siker√ºlt bet√∂lteni</li>`;
            boy.innerHTML = `<li class="loading">üòï Nem siker√ºlt bet√∂lteni</li>`;
            mobileLoading.innerText = "üòï Nem siker√ºlt bet√∂lteni a tippeket";

        });
}


/* ===== SZAVAZ√ÅS ===== */
function vote(choice, balloon) {
  const nameInput = document.getElementById("name");
  const name = nameInput.value.trim();
  if (!name) return alert("Add meg a neved!");

  // üéâ 1. AZONNALI UI VISSZAJELZ√âS
  const color = choice === "kisl√°ny" ? "#ff69b4" : "#5dade2";

  balloon.classList.add("pop");
  createConfetti(color);

  document.getElementById("popupTitle").innerText =
    choice === "kisl√°ny" ? "üíó Kisl√°nyra szavazt√°l!" : "üíô Kisfi√∫ra szavazt√°l!";
  document.getElementById("popupText").innerText = `K√∂sz√∂nj√ºk, ${name}!`;
  document.getElementById("popup").style.display = "flex";

  setTimeout(() => {
    document.querySelectorAll(".balloon").forEach(b => b.classList.remove("pop"));
  }, 400);

  // üì° 2. ADATK√úLD√âS H√ÅTT√âRBEN
  fetch(SCRIPT_URL, {
    method: "POST",
    headers: { "Content-Type": "text/plain;charset=utf-8" },
    body: JSON.stringify({ name, choice })
  })
  .then(r => r.json())
  .then(res => {
    if (res?.id) {
      sessionStorage.setItem("voteId", res.id);
      renderLists(); // friss√≠tj√ºk a list√°t, de ez m√°r nem blokkol
    } else {
      alert("Hiba t√∂rt√©nt a ment√©sn√©l üòï");
    }
  })
  .catch(err => {
    console.error(err);
    alert("Nem siker√ºlt elmenteni a szavazatot üòï");
  });
}


/* INIT */
renderLists();

function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}

// csak egyszer, indul√°skor
resizeCanvas();

// csak val√≥di orient√°ci√≥v√°lt√°skor
window.addEventListener("orientationchange", () => {
    setTimeout(resizeCanvas, 300);
});


function closePopup() {
  const id = sessionStorage.getItem("voteId");
  if (!id) {
    alert("Hi√°nyz√≥ azonos√≠t√≥. Szavazz √∫jra k√©rlek!");
    return;
  }
  window.location.href =
    "https://attilabekecs.github.io/genderrevealparty/mikorszuletikababa.html?id=" + encodeURIComponent(id);
}

function openTips(type) {
    const title = document.getElementById("tipsTitle");
    const content = document.getElementById("tipsContent");

    title.innerText = type === "girl" ? "üíó L√°ny tippek" : "üíô Fi√∫ tippek";

    const sourceList = type === "girl"
        ? document.getElementById("girlList")
        : document.getElementById("boyList");

    content.innerHTML = sourceList.innerHTML || "<li>M√©g nincs tipp</li>";

    document.getElementById("tipsPopup").style.display = "flex";
}

function closeTips() {
    document.getElementById("tipsPopup").style.display = "none";
}


</script>

</body>
</html>
