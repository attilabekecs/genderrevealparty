<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>Babav√°r√≥ buli ‚Äì Tippeld meg a baba nem√©t</title>

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: "Segoe UI", sans-serif;
    background: linear-gradient(135deg, #ffd6e8, #d6e8ff);
    height: 100vh;
}

/* TELJES OLDAL */
.wrapper {
    display: grid;
    grid-template-columns: 1fr 1.3fr 1fr;
    gap: 30px;
    width: 100vw;
    height: 100vh;
    padding: 30px;
}

/* BOXOK */
.box {
    background: white;
    border-radius: 30px;
    padding: 30px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.15);
    overflow-y: auto;
}

/* K√ñZ√âP */
.center {
    text-align: center;
    box-shadow: 0 20px 50px rgba(0,0,0,0.2);
}

input {
    padding: 14px;
    width: 80%;
    border-radius: 12px;
    border: 1px solid #ccc;
    font-size: 16px;
    margin: 20px 0;
}

/* LUFI */
.balloons {
    display: flex;
    justify-content: space-around;
    margin-top: 30px;
}

.balloon {
    width: 130px;
    height: 170px;
    border-radius: 50% 50% 45% 45%;
    cursor: pointer;
    position: relative;
    transition: transform 0.2s;
}

.balloon:hover { transform: scale(1.05); }

.balloon::after {
    content: "";
    position: absolute;
    bottom: -35px;
    left: 50%;
    width: 2px;
    height: 35px;
    background: #999;
}

.pink {
    background: radial-gradient(circle at 30% 30%, #fff, #ff69b4);
}

.blue {
    background: radial-gradient(circle at 30% 30%, #fff, #5dade2);
}

/* POP */
.pop {
    animation: pop 0.4s forwards;
}

@keyframes pop {
    to {
        transform: scale(2);
        opacity: 0;
    }
}

/* LIST√ÅK */
ul { list-style: none; padding: 0; margin-top: 15px; }
li { padding: 10px 0; border-bottom: 1px solid #eee; }

/* KONFETTI */
canvas {
    position: fixed;
    top: 0;
    left: 0;
    pointer-events: none;
}

/* MOBIL */
@media (max-width: 900px) {
    .wrapper {
        grid-template-columns: 1fr;
        height: auto;
    }
}
    .counts {
    display: flex;
    justify-content: space-around;
    margin-top: 55px;      /* t√°vols√°g a madzagt√≥l */
    padding-bottom: 20px;  /* leveg≈ë a box alja fel√© */
}


.count {
    font-size: 28px;
    font-weight: 700;
}

.pink-text {
    color: #ff69b4;
}

.blue-text {
    color: #5dade2;
}

</style>
</head>

<body>

<canvas id="confetti"></canvas>

<div class="wrapper">

    <!-- L√ÅNY -->
    <div class="box">
        <h2 style="color:#ff69b4">üíó L√°ny tippek</h2>
        <ul id="girlList"></ul>
    </div>

    <!-- K√ñZ√âP -->
    <div class="box center">
        <h1>üéâ Babav√°r√≥ buli üéâ</h1>
        <p>Tippeld meg a baba nem√©t!</p>

        <input type="text" id="name" placeholder="Add meg a neved">

        <div class="balloons">
            <div class="balloon pink" onclick="vote('kisl√°ny', this)"></div>
            <div class="balloon blue" onclick="vote('kisfi√∫', this)"></div>
        </div>
        <div class="counts">
  <div class="count pink-text">
    üíó <span id="girlCount">0</span>
  </div>
  <div class="count blue-text">
    üíô <span id="boyCount">0</span>
  </div>
</div>


        <p id="message"></p>
    </div>

    <!-- FI√ö -->
    <div class="box">
        <h2 style="color:#5dade2">üíô Fi√∫ tippek</h2>
        <ul id="boyList"></ul>
    </div>

</div>

<script>
/* ===== GOOGLE SCRIPT URL ===== */
const SCRIPT_URL =
"https://script.google.com/macros/s/AKfycbz90B9bjTcOWKTyX4xbRxfTjFH3gnS7m3D3CwgLpp-ChwjwZeB0rn7nqMknUVs-Q_nN8g/exec";

/* ===== KONFETTI ===== */
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let confetti = [];

function createConfetti(color) {
    for (let i = 0; i < 120; i++) {
        confetti.push({
            x: Math.random() * canvas.width,
            y: -10,
            size: Math.random() * 6 + 4,
            speed: Math.random() * 4 + 2,
            color
        });
    }
    animateConfetti();
}

function animateConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    confetti.forEach((p, i) => {
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x, p.y, p.size, p.size);
        p.y += p.speed;
        if (p.y > canvas.height) confetti.splice(i, 1);
    });
    if (confetti.length > 0) requestAnimationFrame(animateConfetti);
}

/* ===== LIST√ÅK BET√ñLT√âSE SHEETS-B≈êL ===== */
function renderLists() {
    fetch(SCRIPT_URL)
        .then(r => r.json())
        .then(tips => {
            const girl = document.getElementById("girlList");
            const boy = document.getElementById("boyList");
            girl.innerHTML = "";
            boy.innerHTML = "";

            let girlCounter = 0;
let boyCounter = 0;

tips.forEach(t => {
    const li = document.createElement("li");
    li.textContent = t.name;

    if (t.choice === "kisl√°ny") {
        girl.appendChild(li);
        girlCounter++;
    } else if (t.choice === "kisfi√∫") {
        boy.appendChild(li);
        boyCounter++;
    }
});

// sz√°ml√°l√≥k friss√≠t√©se
document.getElementById("girlCount").innerText = girlCounter;
document.getElementById("boyCount").innerText = boyCounter;

        });
}

/* ===== SZAVAZ√ÅS ===== */
function vote(choice, balloon) {
    const nameInput = document.getElementById("name");
    const name = nameInput.value.trim();
    if (!name) return alert("Add meg a neved!");

    fetch(SCRIPT_URL, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            name: name,
            choice: choice
        })
    }).then(renderLists);

    const color = choice === "kisl√°ny" ? "#ff69b4" : "#5dade2";
    balloon.classList.add("pop");
    createConfetti(color);

    document.getElementById("message").innerText =
        `üéÜ K√∂sz√∂nj√ºk ${name}!`;

    setTimeout(() => {
        nameInput.value = "";
        document.getElementById("message").innerText = "";
        document.querySelectorAll(".balloon")
            .forEach(b => b.classList.remove("pop"));
    }, 1200);
}

/* INIT */
renderLists();
setInterval(renderLists, 5000);

window.onresize = () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
};
</script>

</body>
</html>
